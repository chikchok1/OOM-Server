# 데이터 파일 형식 문서

## 개요
이 문서는 서버에서 사용하는 모든 데이터 파일의 형식을 정의합니다.
모든 파일은 CSV 형식(쉼표로 구분)이며, data 디렉토리에 저장됩니다.

---

## 사용자 파일

### 1. users.txt - 학생 정보
```
형식: 이름,학생ID,비밀번호
예시: 김철수,S0001,password123
```
- **이름**: 사용자의 이름
- **학생ID**: S로 시작하는 ID (예: S0001, S0002)
- **비밀번호**: 평문 저장

### 2. prof.txt - 교수 정보
```
형식: 이름,교수ID,비밀번호
예시: 박교수,P0001,password123
```
- **이름**: 교수 이름
- **교수ID**: P로 시작하는 ID (예: P0001)
- **비밀번호**: 평문 저장

### 3. assistant.txt - 조교 정보
```
형식: 이름,조교ID,비밀번호
예시: 이조교,A0001,password123
```
- **이름**: 조교 이름
- **조교ID**: A로 시작하는 ID (예: A0001)
- **비밀번호**: 평문 저장

---

## 예약 관련 파일

### 4. ReservationRequest.txt - 예약 신청 (대기 중)
```
형식: 이름,강의실번호,날짜,시간,목적,역할,[상태]
예시: 김철수,908호,2024-10-20,09:00-10:00,수업,학생,대기
```
- **이름**: 신청자 이름
- **강의실번호**: 예) 908호, 912호, L101호
- **날짜**: YYYY-MM-DD 형식
- **시간**: HH:MM-HH:MM 형식
- **목적**: 수업, 시험, 회의 등
- **역할**: 학생, 교수, 조교
- **상태**: (선택) 대기 상태를 나타냄

### 5. ReserveClass.txt - 강의실 예약 (확정)
```
형식: 이름,강의실번호,날짜,시간,목적,역할,상태
예시: 김철수,908호,2024-10-20,09:00-10:00,수업,학생,예약됨
```
- **이름**: 신청자 이름
- **강의실번호**: 908호, 912호, 913호, 914호 등
- **날짜**: YYYY-MM-DD 형식
- **시간**: HH:MM-HH:MM 형식
- **목적**: 수업, 시험, 회의 등
- **역할**: 학생, 교수, 조교
- **상태**: 반드시 "예약됨" (필수)

### 6. ReserveLab.txt - 실험실 예약 (확정)
```
형식: 이름,실험실번호,날짜,시간,목적,역할,상태
예시: 박철수,L101호,2024-10-20,13:00-14:00,실험,학생,예약됨
```
- **이름**: 신청자 이름
- **실험실번호**: L101호, L102호 등
- **날짜**: YYYY-MM-DD 형식
- **시간**: HH:MM-HH:MM 형식
- **목적**: 실험, 연구 등
- **역할**: 학생, 교수, 조교
- **상태**: 반드시 "예약됨" (필수)

---

## 변경 요청 파일

### 7. ChangeRequest.txt - 예약 변경 신청
```
형식: 신청자ID,새시간,새날짜,새강의실,이름,목적,역할,기존시간,기존날짜,기존강의실
예시: S0001,10:00-11:00,2024-10-21,909호,김철수,수업,학생,09:00-10:00,2024-10-20,908호
```
- **신청자ID**: 변경을 요청한 사용자 ID
- **새시간**: 변경하려는 새 시간 (HH:MM-HH:MM)
- **새날짜**: 변경하려는 새 날짜 (YYYY-MM-DD)
- **새강의실**: 변경하려는 새 강의실 (예: 908호)
- **이름**: 신청자 이름
- **목적**: 수업, 시험, 회의 등
- **역할**: 학생, 교수, 조교
- **기존시간**: 기존 예약의 시간 (HH:MM-HH:MM)
- **기존날짜**: 기존 예약의 날짜 (YYYY-MM-DD)
- **기존강의실**: 기존 예약의 강의실 (예: 908호)

⚠️ 정확히 10개의 필드가 필요합니다!

---

## 기타 파일

### 8. RoomStatus.txt - 강의실 상태
```
형식: 강의실번호,상태
예시: 908호,사용불가
      912호,사용불가
```
- **강의실번호**: 예약 불가능한 강의실
- **상태**: "사용불가" (사용 가능한 강의실은 기록하지 않음)

### 9. ApprovedBackUp.txt - 승인된 예약 백업
```
형식: 이름,강의실번호,날짜,시간,목적,역할,상태
예시: 김철수,908호,2024-10-20,09:00-10:00,수업,학생,승인
```
- 승인된 모든 예약의 기록 (로그 목적)
- 상태: 반드시 "승인"

---

## ⚠️ 주의사항

### 형식 위반 시 발생하는 문제
1. **필드 개수 불일치**: 파싱 오류 발생 → 예약 조회 불가
2. **공백 미정리**: trim() 사용하지 않으면 비교 실패
3. **날짜/시간 형식 불일치**: 중복 확인 실패 → 같은 시간에 중복 예약 가능

### 파일 생성 규칙
- 모든 파일은 CSV 형식 (쉼표로 구분)
- 줄바꿈은 `\n` 사용
- 모든 파일은 data 디렉토리에 저장
- 서버 시작 시 자동으로 생성됨 (파일이 없으면)

---

## 데이터 검증

### 강의실 번호 분류
```java
// 강의실 (ReserveClass.txt)
908호, 912호, 913호, 914호

// 실험실 (ReserveLab.txt)
L로 시작하는 모든 번호
```

### 사용자 ID 분류
```java
// 학생: S로 시작
S0001, S0002, ...

// 교수: P로 시작
P0001, P0002, ...

// 조교: A로 시작
A0001, A0002, ...
```

---

## 예시 데이터

### users.txt
```
김철수,S0001,1234
박영희,S0002,1234
이민준,S0003,1234
```

### prof.txt
```
박교수,P0001,1234
윤교수,P0002,1234
```

### ReservationRequest.txt
```
김철수,908호,2024-10-20,09:00-10:00,수업,학생,대기
박영희,L101호,2024-10-20,13:00-14:00,실험,학생,대기
```

### ReserveClass.txt
```
김철수,908호,2024-10-20,09:00-10:00,수업,학생,예약됨
이민준,912호,2024-10-21,10:00-11:00,시험,학생,예약됨
```

### ChangeRequest.txt
```
S0001,10:00-11:00,2024-10-21,909호,김철수,수업,학생,09:00-10:00,2024-10-20,908호
```

---

## 마이그레이션 가이드 (향후)

만약 데이터베이스로 마이그레이션하려면:
1. 각 파일을 테이블로 변환
2. 기본 키 설정 (사용자 ID, 예약 번호 등)
3. 외래 키 설정 (사용자 → 예약)
4. 인덱스 추가 (강의실번호, 날짜 등)
5. 트랜잭션 처리 추가
